{% comment %} <h2>Found Items</h2>
<ul>
    {% for item in items %}
        <li>
            <strong>{{ item.title }}</strong><br>
            {{ item.description }}<br>
            Location: {{ item.location }}<br>
            Reported by: {{ item.reported_by.username }} on {{ item.date_reported|date:"Y-m-d H:i" }}
        </li>
        <hr>
    {% empty %}
        <li>No found items reported yet.</li>
    {% endfor %}
</ul>

<a href="{% url 'home' %}">
    <button>Back to Home</button>
</a> {% endcomment %}

{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Found Items - KLH Lost & Found</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial,sans-serif; background:#f4f4f9; margin:0; padding:0; display:flex; justify-content:center; align-items:center; min-height:100vh; }
        .container { background:#fff; padding:30px; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1); max-width:700px; width:100%; }
        h2 { color:#333; text-align:center; margin-bottom:20px; }
        ul { list-style:none; padding:0; }
        li { background:#f9f9f9; padding:15px; border-radius:6px; margin-bottom:15px; border-left:5px solid #28a745; } /* green for found */
        strong { font-size:18px; color:#28a745; }
        em { color:#666; }
        .claim-button, .back-button { display:block; margin:10px auto 0; padding:10px 20px; background:#007bff; color:white; border:none; border-radius:4px; text-align:center; font-size:16px; cursor:pointer; text-decoration:none; }
        .claim-button:hover, .back-button:hover { background:#0056b3; }
        img { max-width:100%; height:auto; margin-bottom:10px; }
        .no-items { text-align:center; color:#888; font-style:italic; }
    </style>
</head>
<body>
<div class="container">
    <h2>Found Items</h2>

    <ul>
        {% for item in items %}
            <li>
                {% if item.image %}
                    <img src="{{ item.image.url }}" alt="{{ item.title }}">
                {% endif %}
                <strong>{{ item.title }}</strong><br>
                {{ item.description }}<br>
                <em>Location:</em> {{ item.location }}<br>
                <em>Reported by:</em> {{ item.reported_by.username }} on {{ item.date_reported|date:"Y-m-d" }}<br>

                {% if user.is_authenticated %}
                    {% if item.claimed_by %}
                        {% if item.claimed_by == user %}
                            <em>You have claimed this item.</em>
                        {% else %}
                            <em>Already claimed by someone else.</em>
                        {% endif %}
                    {% else %}
                        <form action="{% url 'claim_item' item.id %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="claim-button">Claim this item</button>
                        </form>
                    {% endif %}
                {% endif %}
            </li>
        {% empty %}
            <li class="no-items">No found items reported yet.</li>
        {% endfor %}
    </ul>

    <a href="{% url 'home' %}"><button class="back-button">Back to Home</button></a>
</div>
</body>
</html>
